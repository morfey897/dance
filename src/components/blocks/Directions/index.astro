---
import Directions from "./Directions";
import type { DirectionsType } from "./types";
import { getIndex, getList, sortComparator } from "../../../utils/md";


let directions = [];
try {
  directions = await Astro.glob("../../../../content/directions/*.md");
} catch (e) {}

const indexDirection = getIndex(directions);
const list = getList(directions);

const childrenList = list.sort(sortComparator).map((data) => {
  const uid = data.file.match(/\/([^\/]+)\.md?$/)[1];
  const frontmatter = data.frontmatter;
  return {
    uid,
    headline: "",
    image: "",
    subheadline: "",
    bodyHTML: data.compiledContent(),
    ...frontmatter,
  };
});

const { Content } = indexDirection || { Content: () => {} };
const props = {
  ...indexDirection?.frontmatter,
  list: childrenList,
} as DirectionsType;
---

<Directions {...props} client:load>
  <Content />
</Directions>
