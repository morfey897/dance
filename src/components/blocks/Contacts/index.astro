---
import { getGoogleApiKey } from "../../../data/env";
import Contacts from "./Contacts";
import type { ContactsType } from "./types";
import { getIndex } from "../../../utils/md";

let contacts = [];
let localBusiness = [];
try {
  contacts = await Astro.glob("../../../../content/contacts/*.md");
} catch (e) {}
try {
  localBusiness = await Astro.glob("../../../../content/local-business.md");
} catch (e) {}

const indexContacts = getIndex(contacts);

const { Content } = indexContacts || { Content: () => {} };
const props = {
  ...indexContacts?.frontmatter,
  ...(localBusiness || [])[0]?.frontmatter,
  google_api_key: getGoogleApiKey(Astro.request),
};
---

<Contacts {...props} client:load>
  <Content />
</Contacts>
