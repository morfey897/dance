---
import { getPreferableLangs } from "../utils/url";
import { AVAILABLE_LANGS, DEFAULT_LANG } from "../generated";

let redirectLang =
	getPreferableLangs(Astro.request).find((code) => AVAILABLE_LANGS.includes(code)) ||
	DEFAULT_LANG;

return Astro.redirect(`/${redirectLang}`, 301);
---